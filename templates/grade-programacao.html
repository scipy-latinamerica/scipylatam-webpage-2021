{%- from "macros/keynote.html" import render_keynote -%}
{%- set keynotes = site.get('/keynotes', alt=this.alt).children -%}
{%- set palestrantes = site.get('/palestrantes', alt=this.alt).children -%}
{%- set schedule = (palestrantes|list + keynotes|list)|str2datetime(attribute='presentation_time', new_field='presentation_datetime')|sort(attribute='presentation_time,name') -%}


<div class="schedule">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">

                <div style="display: inline-block;">
                    <a href="{{ '/'|url(alt=this.alt) }}"><i class="bi bi-arrow-return-left"></i> Voltar</a>
                </div>

                <h1 class="schedule-title text-center">Grade de Programação</h1>

                <input class="form-control" id="myInput" type="text" placeholder="Filtre..."> <br>

                <ul class="nav nav-pills" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-pill nav-pills-schedule active" id="tab-11" data-bs-toggle="tab" data-bs-target="#dez-11" type="button" role="tab" aria-controls="home" aria-selected="true">11 - Dez</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-pill nav-pills-schedule" id="tab-12" data-bs-toggle="tab" data-bs-target="#dez-12" type="button" role="tab" aria-controls="profile" aria-selected="false">12 - Dez</button>
                  </li>
                </ul>
                <br>
                <div class="tab-content" id="myTabContent">
                    {% for day, group in schedule|groupby('presentation_datetime.day') %}
                        {% set loop_ = loop.index %}
                        <div id="dez-{{ day }}" class="tab-pane fade {% if loop_ == 1 %}show active{% endif %}" role="tabpanel">
                            <div class="table-responsive">
                                <table id="schedule-table" class="table table-hover">
                                  <thead>
                                    <tr>
                                      <th scope="col">Hora</th>
                                      <th scope="col" class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell">Tipo</th>
                                      <th scope="col" class="d-none d-md-table-cell">Apresentação</th>
                                      <th scope="col" class="d-table-cell d-xs-none d-sm-none d-md-none">Apresentação2</th>
                                      <th scope="col" class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell">Palestrante</th>
                                      <th scope="col" class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell">Nível</th>
                                      <th scope="col">Idioma</th>
                                      <th scope="col">Trilha</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                  {% for palestrante in group|sort(attribute='presentation_datetime') %}

                                  {% if palestrante.type == 'keynote' %}
                                    <tr class="table-dark">
                                      <td style="min-width: 100px">
                                        {{ palestrante.presentation_time|schedule_datetime(duration=palestrante.duration, alt=this.alt) }}
                                      </td>
                                      <td colspan="3" class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell" style="max-width: 200px">
                                        KEYNOTE - {{ palestrante.name|upper }}
                                      </td>
                                      <td class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell"> {{ palestrante.level }}</td>
                                      <td>
                                        {% if palestrante.language == 'pt' %}<span class="badge bg-secondary" alt="Portuguese">PT</span>
                                        {% elif palestrante.language == 'es' %}<span class="badge bg-secondary" alt="Spanish">ES</span>
                                        {% elif palestrante.language == 'en' %}<span class="badge bg-secondary" alt="English">EN</span>
                                        {% endif %}
                                      </td>
                                      <td>
                                          <a href="{{ palestrante.youtube_channel }}" alt="{{ palestrante.discord_channel }}"><i class="bi bi-youtube" style="font-size: 2rem;color: #dc3545;"></i></a> {{ palestrante.track }}
                                          <a href="{{ palestrante.youtube_channel }}" alt="{{ palestrante.discord_channel }}"><i class="bi bi-discord" style="font-size: 2rem;color: #4458E5;"></i></a> {{ palestrante.track }}
                                      </td>
                                    </tr>
                                    {% else %}
                                    <tr>
                                      <td style="min-width: 100px">
                                        <span class="schedule-hour">
                                            {{ palestrante.presentation_time|schedule_datetime(duration=palestrante.duration, alt=this.alt) }}
                                        </span>
                                      </td>
                                      <td class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell" style="max-width: 200px">
                                        {% if palestrante.type == 'talk' %}Palestra
                                        {% elif palestrante.type == 'tutorial' %}Tutorial
                                        {% endif %}
                                      </td>
                                      <td class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell">{{ palestrante.title|title }}</td>
                                      <td class="d-table-cell d-xs-none d-sm-none d-md-none">2{{ palestrante.title|title }} - {{ palestrante.name }}</td>
                                      <td class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell">
                                        <span class="schedule-name">{{ palestrante.name }}</span>
                                      </td>
                                      <td class="d-none d-xs-table-cell d-sm-table-cell d-md-table-cell"> {{ palestrante.level }}</td>
                                      <td>
                                        {% if palestrante.language == 'pt' %}<span class="badge bg-secondary" alt="Portuguese">PT</span>
                                        {% elif palestrante.language == 'es' %}<span class="badge bg-secondary" alt="Spanish">ES</span>
                                        {% elif palestrante.language == 'en' %}<span class="badge bg-secondary" alt="English">EN</span>
                                        {% endif %}
                                      </td>
                                      <td>
                                          <a href="{{ palestrante.youtube_channel }}" alt="{{ palestrante.discord_channel }}"><i class="bi bi-youtube" style="font-size: 2rem;color: #dc3545;"></i></a> {{ palestrante.track }}
                                          <a href="{{ palestrante.youtube_channel }}" alt="{{ palestrante.discord_channel }}"><i class="bi bi-discord" style="font-size: 2rem;color: #4458E5;"></i></a> {{ palestrante.track }}
                                      </td>
                                    </tr>
                                    {% endif %}

                                  {% endfor %}
                                  </tbody>
                                </table>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
